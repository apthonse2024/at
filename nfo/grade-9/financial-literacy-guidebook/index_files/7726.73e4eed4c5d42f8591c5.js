"use strict";(self.webpackChunk_scribd_app_monolith=self.webpackChunk_scribd_app_monolith||[]).push([[7726],{17726:function(e,t,s){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(r,a){function n(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(n,o)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var s,i,r,a,n={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(r=n.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){n=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(6===a[0]&&n.label<r[1]){n.label=r[1],r=a;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(a);break}r[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{s=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(s(59971)),l=n(s(69437)),u=n(s(76772)),d=s(10191),c=s(43746),v=n(s(19800)),h=n(s(62517)),f=s(4354),g=s(51724),p=function(){function e(e,t){this.overrides={gates:{},configs:{},layers:{}},this.sdkInternal=e,this.userCacheKey=this.sdkInternal.getCurrentUserCacheKey(),this.values={},this.userValues={feature_gates:{},dynamic_configs:{},sticky_experiments:{},layer_configs:{},has_updates:!1,time:0,evaluation_time:0,derived_fields:{}},this.stickyDeviceExperiments={},this.loaded=!1,this.reason=f.EvaluationReason.Uninitialized,this.userPersistentStorageAdapter=this.sdkInternal.getOptions().getUserPersistentStorage(),this.userPersistentStorageData={experiments:{}},t?this.bootstrap(t):this.load()}return e.prototype.load=function(){this.loadFromLocalStorage(),this.partialLoadFromPersistentStorageAdapter()},e.prototype.loadAsync=function(){return r(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.loadFromAsyncStorage()];case 1:return e.sent(),this.partialLoadFromPersistentStorageAdapter(),[2]}}))}))},e.prototype.updateUser=function(e){this.userCacheKey=this.sdkInternal.getCurrentUserCacheKey();var t=this.setUserValueFromCache(e);return this.partialLoadFromPersistentStorageAdapter(),t},e.prototype.loadFromAsyncStorage=function(){return r(this,void 0,void 0,(function(){var e,t;return a(this,(function(s){switch(s.label){case 0:return e=this.parseCachedValues,[4,v.default.getItemAsync(d.INTERNAL_STORE_KEY)];case 1:return t=[s.sent()],[4,v.default.getItemAsync(d.STICKY_DEVICE_EXPERIMENTS_KEY)];case 2:return e.apply(this,t.concat([s.sent()])),this.userCacheKey=this.sdkInternal.getCurrentUserCacheKey(),this.loaded=!0,[2]}}))}))},e.prototype.bootstrap=function(e){var t,s,i,r,a,n,o=this.sdkInternal.getCurrentUserCacheKey(),l=this.sdkInternal.getCurrentUser(),d=null!==(i=null!==(s=null===(t=null==l?void 0:l.customIDs)||void 0===t?void 0:t.stableID)&&void 0!==s?s:this.sdkInternal.getStatsigMetadata().stableID)&&void 0!==i?i:null,c=u.default.getEvaluationReasonForBootstrap(l,e,d);this.loaded=!0;try{var v=e;this.userValues.feature_gates=null!==(r=v.feature_gates)&&void 0!==r?r:{},this.userValues.dynamic_configs=null!==(a=v.dynamic_configs)&&void 0!==a?a:{},this.userValues.layer_configs=null!==(n=v.layer_configs)&&void 0!==n?n:{},this.userValues.evaluation_time=Date.now(),this.userValues.time=Date.now(),this.userValues.hash_used=v.hash_used,this.values[o.v3]=this.userValues,this.reason=c,this.loadOverrides()}catch(e){return}},e.prototype.loadFromLocalStorage=function(){v.default.asyncStorage||(this.parseCachedValues(h.default.getItem(d.INTERNAL_STORE_KEY),h.default.getItem(d.STICKY_DEVICE_EXPERIMENTS_KEY)),this.loaded=!0)},e.prototype.partialLoadFromPersistentStorageAdapter=function(){var e;if(this.userPersistentStorageAdapter){var t=null!==(e=this.userPersistentStorageAdapter.userIDType)&&void 0!==e?e:"userID",s=this.sdkInternal.getCurrentUserUnitID(t);if(s){try{this.userPersistentStorageData=JSON.parse(this.userPersistentStorageAdapter.load(s+":"+t))}catch(e){console.warn("Failed to load from user persistent storage.",e)}this.userValues.sticky_experiments=this.userPersistentStorageData.experiments}}},e.prototype.saveStickyExperimentsToPersistentStorageAdapter=function(){var e;if(this.userPersistentStorageAdapter){var t=null!==(e=this.userPersistentStorageAdapter.userIDType)&&void 0!==e?e:"userID",s=this.sdkInternal.getCurrentUserUnitID(t);if(s){var r=i(i({},this.userPersistentStorageData),{experiments:this.userValues.sticky_experiments});try{this.userPersistentStorageAdapter.save(s+":"+t,JSON.stringify(r))}catch(e){console.warn("Failed to save user experiment values to persistent storage.",e)}}}},e.prototype.isLoaded=function(){return this.loaded},e.prototype.getLastUpdateTime=function(e,t){var s=(0,c.djb2HashForObject)(i(i({},e),{stableID:t}));return this.userValues.user_hash==s?this.userValues.time:null},e.prototype.getPreviousDerivedFields=function(e,t){var s=(0,c.djb2HashForObject)(i(i({},e),{stableID:t}));if(this.userValues.user_hash==s)return this.userValues.derived_fields},e.prototype.parseCachedValues=function(e,t){try{this.values=e?JSON.parse(e):this.values,this.setUserValueFromCache()}catch(e){this.removeFromStorage(d.INTERNAL_STORE_KEY)}try{var s=t?JSON.parse(t):null;s&&(this.stickyDeviceExperiments=s)}catch(e){this.removeFromStorage(d.STICKY_DEVICE_EXPERIMENTS_KEY)}this.loadOverrides()},e.prototype.getUserValues=function(e){var t,s;return null!==(s=null!==(t=this.values[e.v3])&&void 0!==t?t:this.values[e.v2])&&void 0!==s?s:this.values[e.v1]},e.prototype.setUserValueFromCache=function(e){var t;void 0===e&&(e=!1);var s=this.getUserValues(this.userCacheKey);return null==s?(this.resetUserValues(),this.reason=f.EvaluationReason.Uninitialized,null):(null!=s.stableIDUsed&&s.stableIDUsed!==this.getStableID()&&this.sdkInternal.getErrorBoundary().logError("stableIDChanged",new Error("StableID changed from "+s.stableIDUsed+" to "+this.getStableID())),this.userValues=s,this.reason=e?f.EvaluationReason.Prefetch:f.EvaluationReason.Cache,null!==(t=s.evaluation_time)&&void 0!==t?t:0)},e.prototype.removeFromStorage=function(e){var t=this;v.default.removeItemAsync(e).catch((function(e){return t.sdkInternal.getErrorBoundary().logError("removeFromStorage",e)})),h.default.removeItem(e)},e.prototype.loadOverrides=function(){if(!this.sdkInternal.getOptions().getDisableLocalOverrides()){var e=h.default.getItem(d.OVERRIDES_STORE_KEY);if(null!=e)try{this.overrides=JSON.parse(e)}catch(e){h.default.removeItem(d.OVERRIDES_STORE_KEY)}}},e.prototype.setEvaluationReason=function(e){this.reason=e},e.prototype.save=function(e,t,s){return r(this,void 0,void 0,(function(){var i,r,n,o;return a(this,(function(a){switch(a.label){case 0:return i=(0,c.getUserCacheKey)(this.getStableID(),e,this.sdkInternal.getSDKKey()),(r=t).is_delta?[2,this.saveInitDeltas(e,t,!0,s)]:(this.mergeInitializeResponseIntoUserMap(r,this.values,i,e,(function(e){return e}),s),(n=this.getUserValues(i))&&i&&i.v3===this.userCacheKey.v3&&(this.userValues=n,this.reason=f.EvaluationReason.Network),o=this,[4,this.writeValuesToStorage(this.values)]);case 1:return o.values=a.sent(),[2]}}))}))},e.prototype.saveWithoutUpdatingClientState=function(e,t,s){return r(this,void 0,void 0,(function(){var i,r,n;return a(this,(function(a){switch(a.label){case 0:return i=(0,c.getUserCacheKey)(this.getStableID(),e,this.sdkInternal.getSDKKey()),(r=t).is_delta?[2,this.saveInitDeltas(e,t,!1,s)]:(n=JSON.parse(JSON.stringify(this.values)),this.mergeInitializeResponseIntoUserMap(r,n,i,e,(function(e){return e}),s),[4,this.writeValuesToStorage(n)]);case 1:return a.sent(),[2]}}))}))},e.prototype.getDeltasMergeFunction=function(e){var t=this;return function(s,i){var r,a,n,o=null!==(n=null!==(a=null!==(r=e[i.v3])&&void 0!==r?r:e[i.v2])&&void 0!==a?a:e[i.v1])&&void 0!==n?n:t.getDefaultUserCacheValues();return t.mergeUserCacheValues(o,s)}},e.prototype.saveInitDeltas=function(e,t,s,i){var n,o,l;return r(this,void 0,void 0,(function(){var r,u,d,v,h,g,p,_,m,S,I,E=this;return a(this,(function(a){switch(a.label){case 0:return r=(0,c.getUserCacheKey)(this.getStableID(),e,this.sdkInternal.getSDKKey()),u=t,d=JSON.parse(JSON.stringify(this.values)),this.mergeInitializeResponseIntoUserMap(u,d,r,e,this.getDeltasMergeFunction(d),i),v=!1,h=void 0,g=!1,Object.keys(null!==(n=u.prefetched_user_values)&&void 0!==n?n:{}).forEach((function(e){var t,s=d[e],i=null===(t=u.prefetched_user_values)||void 0===t?void 0:t[e];if(s&&i){y(i,s);var r=i.checksum,a=(0,c.djb2HashForObject)({feature_gates:d[e].feature_gates,dynamic_configs:d[e].dynamic_configs,layer_configs:d[e].layer_configs});r&&r!==a&&(v=!0,h=a),p.hash_used!==u.hash_used&&(g=!0)}})),p=null!==(l=null!==(o=d[r.v3])&&void 0!==o?o:d[r.v2])&&void 0!==l?l:d[r.v1],y(u,p),_=u.checksum,m={feature_gates:p.feature_gates,dynamic_configs:p.dynamic_configs,layer_configs:p.layer_configs},S=(0,c.djb2HashForObject)(m),_&&_!==S&&(v=!0,h=S),p.hash_used!==u.hash_used&&(g=!0),v||g?null!=u.deltas_full_response?(this.refetchAndSaveValues(e,i,void 0,h,v,m,u.deltas_full_response).catch((function(e){return E.sdkInternal.getErrorBoundary().logError("refetchAndSaveValues",e)})),[2]):(this.refetchAndSaveValues(e,i,void 0,h,v).catch((function(e){return E.sdkInternal.getErrorBoundary().logError("refetchAndSaveValues",e)})),[2]):s?(p&&r.v3===this.userCacheKey.v3&&(this.userValues=p,this.reason=f.EvaluationReason.Network),I=this,[4,this.writeValuesToStorage(d)]):[3,2];case 1:return I.values=a.sent(),[3,4];case 2:return[4,this.writeValuesToStorage(d)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},e.prototype.refetchAndSaveValues=function(e,t,s,i,n,o,l){var u,d,c,v;return void 0===s&&(s=this.sdkInternal.getOptions().getInitTimeoutMs()),r(this,void 0,void 0,(function(){var r,h,f=this;return a(this,(function(a){return r=this.getLastUpdateTime(e,String(null!==(d=null===(u=this.sdkInternal.getStatsigMetadata())||void 0===u?void 0:u.stableID)&&void 0!==d?d:"")),h=this.getPreviousDerivedFields(e,String(null!==(v=null===(c=this.sdkInternal.getStatsigMetadata())||void 0===c?void 0:c.stableID)&&void 0!==v?v:"")),[2,this.sdkInternal.getNetwork().fetchValues({user:e,sinceTime:r,timeout:s,useDeltas:!1,prefetchUsers:t,previousDerivedFields:h,hadBadDeltaChecksum:n,badChecksum:i,badMergedConfigs:o,badFullResponse:l}).then((function(s){(0,g.verifySDKKeyUsed)(s,f.sdkInternal.getSDKKey(),f.sdkInternal.getErrorBoundary())&&(null==s?void 0:s.has_updates)&&f.saveWithoutUpdatingClientState(e,s,t).catch((function(e){return f.sdkInternal.getErrorBoundary().logError("refetchAndSaveValues:then",e)}))})).catch((function(e){return f.sdkInternal.getErrorBoundary().logError("refetchAndSaveValues",e)}))]}))}))},e.prototype.getStableID=function(){return this.sdkInternal.getStableID()},e.prototype.mergeInitializeResponseIntoUserMap=function(e,t,s,r,a,n){var o;if(e.prefetched_user_values)for(var l=0,u=Object.keys(e.prefetched_user_values);l<u.length;l++){var d=u[l],v=e.prefetched_user_values[d],h=a(this.convertAPIDataToCacheValues(v,d),{v1:d,v2:d,v3:d});if(n){var f=(0,c.djb2HashForObject)(n[d]);h.user_hash=f,h.stableIDUsed=this.getStableID()}t[d]=h}if(s){var g=this.convertAPIDataToCacheValues(e,s.v3);f=(0,c.djb2HashForObject)(i(i({},r),{stableID:String(null!==(o=this.getStableID())&&void 0!==o?o:"")}));g.user_hash=f,g.stableIDUsed=this.getStableID(),t[s.v3]=a(g,s)}},e.prototype.getDefaultUserCacheValues=function(){return{feature_gates:{},layer_configs:{},dynamic_configs:{},sticky_experiments:{},time:0,evaluation_time:0,derived_fields:{}}},e.prototype.mergeUserCacheValues=function(e,t){return{feature_gates:i(i({},e.feature_gates),t.feature_gates),layer_configs:i(i({},e.layer_configs),t.layer_configs),dynamic_configs:i(i({},e.dynamic_configs),t.dynamic_configs),sticky_experiments:e.sticky_experiments,time:t.time,evaluation_time:t.evaluation_time,derived_fields:t.derived_fields,hash_used:t.hash_used,user_hash:t.user_hash,stableIDUsed:t.stableIDUsed}},e.prototype.writeValuesToStorage=function(e){return r(this,void 0,void 0,(function(){var t;return a(this,(function(s){switch(s.label){case 0:return e[this.userCacheKey.v3]?(delete e[this.userCacheKey.v2],delete e[this.userCacheKey.v1]):e[this.userCacheKey.v2]&&delete e[this.userCacheKey.v1],t=Object.entries(e).sort((function(e,t){var s,i,r=e[1],a=t[1];return null==r?1:null==a?-1:(null!==(s=null==a?void 0:a.evaluation_time)&&void 0!==s?s:null==a?void 0:a.time)-(null!==(i=null==r?void 0:r.evaluation_time)&&void 0!==i?i:null==r?void 0:r.time)})).slice(0,10),e=Object.fromEntries(t),v.default.asyncStorage?[4,v.default.setItemAsync(d.INTERNAL_STORE_KEY,JSON.stringify(e))]:[3,2];case 1:return s.sent(),[3,3];case 2:h.default.setItem(d.INTERNAL_STORE_KEY,JSON.stringify(e)),s.label=3;case 3:return[2,e]}}))}))},e.prototype.checkGate=function(e,t){var s;void 0===t&&(t=!1);var i,r=this.getHashedSpecName(e),a={name:e,value:!1,rule_id:"",secondary_exposures:[]};if(t||null==this.overrides.gates[e]){var n=null===(s=this.userValues)||void 0===s?void 0:s.feature_gates[r];n&&(a=n),i=this.getEvaluationDetails(null!=n)}else a={name:e,value:this.overrides.gates[e],rule_id:"override",secondary_exposures:[]},i=this.getEvaluationDetails(!1,f.EvaluationReason.LocalOverride);return{evaluationDetails:i,gate:a}},e.prototype.getConfig=function(e,t){var s,i;void 0===t&&(t=!1);var r,a,n=this.getHashedSpecName(e);if(t||null==this.overrides.configs[e])if(null!=(null===(s=this.userValues)||void 0===s?void 0:s.dynamic_configs[n])){var l=null===(i=this.userValues)||void 0===i?void 0:i.dynamic_configs[n];a=this.getEvaluationDetails(!0),r=this.createDynamicConfig(e,l,a)}else a=this.getEvaluationDetails(!1),r=new o.default(e,{},"",a);else a=this.getEvaluationDetails(!1,f.EvaluationReason.LocalOverride),r=new o.default(e,this.overrides.configs[e],"override",a,[],"",this.makeOnConfigDefaultValueFallback(this.sdkInternal.getCurrentUser()));return r},e.prototype.getExperiment=function(e,t,s){var i,r;if(void 0===t&&(t=!1),void 0===s&&(s=!1),s||null==this.overrides.configs[e]){var a=this.getLatestValue(e,"dynamic_configs");r=this.getEvaluationDetails(null!=a);var n=this.getPossiblyStickyValue(e,a,t,!1,r);i=this.createDynamicConfig(e,n,r)}else r=this.getEvaluationDetails(!1,f.EvaluationReason.LocalOverride),i=new o.default(e,this.overrides.configs[e],"override",r);return i},e.prototype.getLayer=function(e,t,s){var i,r,a,n;if(null!=this.overrides.layers[t]){var o=this.getEvaluationDetails(!1,f.EvaluationReason.LocalOverride);return l.default._create(t,null!==(i=this.overrides.layers[t])&&void 0!==i?i:{},"override",o,e)}var u=this.getLatestValue(t,"layer_configs"),d=this.getEvaluationDetails(null!=u),c=this.getPossiblyStickyValue(t,u,s,!0,d);return l.default._create(t,null!==(r=null==c?void 0:c.value)&&void 0!==r?r:{},null!==(a=null==c?void 0:c.rule_id)&&void 0!==a?a:"",d,e,null==c?void 0:c.secondary_exposures,null==c?void 0:c.undelegated_secondary_exposures,null!==(n=null==c?void 0:c.allocated_experiment_name)&&void 0!==n?n:"",null==c?void 0:c.explicit_parameters,null==c?void 0:c.group_name)},e.prototype.overrideConfig=function(e,t){try{JSON.stringify(t)}catch(e){return void console.warn("Failed to stringify given config override.  Dropping",e)}this.overrides.configs[e]=t,this.saveOverrides()},e.prototype.overrideLayer=function(e,t){try{JSON.stringify(t)}catch(e){return void console.warn("Failed to stringify given layer override.  Dropping",e)}this.overrides.layers[e]=t,this.saveOverrides()},e.prototype.overrideGate=function(e,t){this.overrides.gates[e]=t,this.saveOverrides()},e.prototype.removeGateOverride=function(e){null==e?this.overrides.gates={}:delete this.overrides.gates[e],this.saveOverrides()},e.prototype.removeConfigOverride=function(e){null==e?this.overrides.configs={}:delete this.overrides.configs[e],this.saveOverrides()},e.prototype.removeLayerOverride=function(e){null==e?this.overrides.layers={}:delete this.overrides.layers[e],this.saveOverrides()},e.prototype.getAllOverrides=function(){return this.overrides},e.prototype.saveOverrides=function(){try{h.default.setItem(d.OVERRIDES_STORE_KEY,JSON.stringify(this.overrides))}catch(e){console.warn("Failed to persist gate/config overrides")}},e.prototype.getLatestValue=function(e,t){var s,i,r,a,n,o=this.getHashedSpecName(e);return null!==(r=null===(i=null===(s=this.userValues)||void 0===s?void 0:s[t])||void 0===i?void 0:i[o])&&void 0!==r?r:null===(n=null===(a=this.userValues)||void 0===a?void 0:a[t])||void 0===n?void 0:n[e]},e.prototype.getPossiblyStickyValue=function(e,t,s,i,r){var a,n=this.getHashedSpecName(e);if(!s)return this.removeStickyValue(n),t;var o=this.getStickyValue(n);if(!o)return this.attemptToSaveStickyValue(n,t),t;var l=null;return 1==(null==(l=i?this.getLatestValue(null!==(a=null==o?void 0:o.allocated_experiment_name)&&void 0!==a?a:"","dynamic_configs"):t)?void 0:l.is_experiment_active)?(r.reason=f.EvaluationReason.Sticky,o):(1==(null==t?void 0:t.is_experiment_active)?this.attemptToSaveStickyValue(n,t):this.removeStickyValue(n),t)},e.prototype.createDynamicConfig=function(e,t,s){var i,r,a;return new o.default(e,null!==(i=null==t?void 0:t.value)&&void 0!==i?i:{},null!==(r=null==t?void 0:t.rule_id)&&void 0!==r?r:"",s,null==t?void 0:t.secondary_exposures,null!==(a=null==t?void 0:t.allocated_experiment_name)&&void 0!==a?a:"",this.makeOnConfigDefaultValueFallback(this.sdkInternal.getCurrentUser()),null==t?void 0:t.group_name,null==t?void 0:t.id_type,null==t?void 0:t.is_experiment_active)},e.prototype.getStickyValue=function(e){var t,s;return null!==(s=null===(t=this.userValues)||void 0===t?void 0:t.sticky_experiments[e])&&void 0!==s?s:this.stickyDeviceExperiments[e]},e.prototype.attemptToSaveStickyValue=function(e,t){var s;t&&t.is_user_in_experiment&&t.is_experiment_active&&(!0===t.is_device_based?this.stickyDeviceExperiments[e]=t:(null===(s=this.userValues)||void 0===s?void 0:s.sticky_experiments)&&(this.userValues.sticky_experiments[e]=t),this.saveStickyValuesToStorage())},e.prototype.removeStickyValue=function(e){var t,s,i,r;0===Object.keys(null!==(s=null===(t=this.userValues)||void 0===t?void 0:t.sticky_experiments)&&void 0!==s?s:{}).length&&0===Object.keys(null!==(i=this.stickyDeviceExperiments)&&void 0!==i?i:{}).length||(null===(r=this.userValues)||void 0===r||delete r.sticky_experiments[e],delete this.stickyDeviceExperiments[e],this.saveStickyValuesToStorage())},e.prototype.saveStickyValuesToStorage=function(){this.userPersistentStorageAdapter?this.saveStickyExperimentsToPersistentStorageAdapter():(this.values[this.userCacheKey.v3]=this.userValues,this.setItemToStorage(d.INTERNAL_STORE_KEY,JSON.stringify(this.values)),this.setItemToStorage(d.STICKY_DEVICE_EXPERIMENTS_KEY,JSON.stringify(this.stickyDeviceExperiments)))},e.prototype.getGlobalEvaluationDetails=function(){var e,t;return{reason:null!==(e=this.reason)&&void 0!==e?e:f.EvaluationReason.Uninitialized,time:null!==(t=this.userValues.evaluation_time)&&void 0!==t?t:0}},e.prototype.getEvaluationDetails=function(e,t){var s;return e?{reason:this.reason,time:null!==(s=this.userValues.evaluation_time)&&void 0!==s?s:Date.now()}:{reason:null!=t?t:this.reason==f.EvaluationReason.Uninitialized?f.EvaluationReason.Uninitialized:f.EvaluationReason.Unrecognized,time:Date.now()}},e.prototype.resetUserValues=function(){this.userValues={feature_gates:{},dynamic_configs:{},sticky_experiments:{},layer_configs:{},time:0,evaluation_time:0,derived_fields:{}}},e.prototype.getHashedSpecName=function(e){switch(this.userValues.hash_used){case"djb2":return(0,c.djb2Hash)(e);case"none":return e;default:return(0,c.sha256Hash)(e)}},e.prototype.convertAPIDataToCacheValues=function(e,t){var s,i;return{feature_gates:e.feature_gates,layer_configs:e.layer_configs,dynamic_configs:e.dynamic_configs,sticky_experiments:null!==(i=null===(s=this.values[t])||void 0===s?void 0:s.sticky_experiments)&&void 0!==i?i:{},time:null==e.time||isNaN(e.time)?0:e.time,evaluation_time:Date.now(),hash_used:e.hash_used,derived_fields:e.derived_fields}},e.prototype.setItemToStorage=function(e,t){var s=this;v.default.asyncStorage?v.default.setItemAsync(e,t).catch((function(e){s.sdkInternal.getErrorBoundary().logError("setItemToStorage",e)})):h.default.setItem(e,t)},e.prototype.makeOnConfigDefaultValueFallback=function(e){var t=this;return function(s,i,r,a){t.isLoaded()&&t.sdkInternal.getLogger().logConfigDefaultValueFallback(e,"Parameter "+i+" is a value of type "+a+".\n          Returning requested defaultValue type "+r,{name:s.getName(),ruleID:s.getRuleID(),parameter:i,defaultValueType:r,valueType:a})}},e}();function y(e,t){var s,i,r;(null!==(s=e.deleted_configs)&&void 0!==s?s:[]).forEach((function(e){delete t.dynamic_configs[e]})),(null!==(i=e.deleted_gates)&&void 0!==i?i:[]).forEach((function(e){delete t.feature_gates[e]})),(null!==(r=e.deleted_layers)&&void 0!==r?r:[]).forEach((function(e){delete t.layer_configs[e]}))}t.default=p}}]);
//# sourceMappingURL=https://www.scribd.com/webpack/monolith/7726.73e4eed4c5d42f8591c5.js.map