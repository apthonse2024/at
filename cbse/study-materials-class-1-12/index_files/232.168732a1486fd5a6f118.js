"use strict";(self.webpackChunk_scribd_app_monolith=self.webpackChunk_scribd_app_monolith||[]).push([[232],{62229:function(t,e,i){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigEndpoint=void 0;var a,s=i(27309),l=r(i(32863)),u=r(i(50158));!function(t){t.Initialize="initialize",t.Rgstr="rgstr",t.LogEventBeacon="log_event_beacon"}(a=e.StatsigEndpoint||(e.StatsigEndpoint={}));var c=function(){function t(t){this.retryCodes={408:!0,500:!0,502:!0,503:!0,504:!0,522:!0,524:!0,599:!0},this.canUseKeepalive=!1,this.sdkInternal=t,this.leakyBucket={},this.init()}return t.prototype.init=function(){if(!this.sdkInternal.getOptions().getDisableNetworkKeepalive())try{this.canUseKeepalive="keepalive"in new Request("")}catch(t){this.canUseKeepalive=!1}},t.prototype.fetchValues=function(t){var e=t.user,i=t.sinceTime,n=t.timeout,o=t.useDeltas,r=t.prefetchUsers,s=t.previousDerivedFields,l=t.hadBadDeltaChecksum,c=t.badChecksum,d=t.badMergedConfigs,g=t.badFullResponse,p={user:e,prefetchUsers:r,statsigMetadata:this.sdkInternal.getStatsigMetadata(),sinceTime:null!=i?i:void 0,deltasResponseRequested:o,hash:"djb2",previousDerivedFields:s,hadBadDeltaChecksum:l,badChecksum:c,badMergedConfigs:d,badFullResponse:g};return this.postWithTimeout(a.Initialize,p,{timeout:n,retries:3,diagnostics:u.default.mark.initialize.networkRequest})},t.prototype.postWithTimeout=function(t,e,i){var r,a=this,l=null!=i?i:{},u=l.timeout,c=void 0===u?0:u,d=l.retries,g=void 0===d?0:d,p=l.backoff,f=void 0===p?1e3:p,h=l.diagnostics,v=void 0===h?null:h,b=!1,y=null,m=null,k=[];0!=c&&(y=new Promise((function(t,e){setTimeout((function(){b=!0,e(new s.StatsigInitializationTimeoutError(c))}),c)})));var L,I=this.postToEndpoint(t,e,{retryOptions:{retryLimit:g,backoff:f},diagnostics:v}).then((function(i){if(!(r=i).ok)return Promise.reject(new Error("Request to "+t+" failed with status "+r.status));if("object"!=typeof r.data){var s=new Error("Request to "+t+" received invalid response type. Expected 'object' but got '"+typeof r.data+"'");return a.sdkInternal.getErrorBoundary().logError("postWithTimeoutInvalidRes",s,{getExtraData:function(){return n(a,void 0,void 0,(function(){return o(this,(function(i){return[2,this.getErrorData(t,e,g,f,r)]}))}))}}),Promise.reject(s)}var l=r.data;return a.sdkInternal.getErrorBoundary().capture("postWithTimeout",(function(){return n(a,void 0,void 0,(function(){return o(this,(function(t){return m=l,b&&(k.forEach((function(t){return t(l)})),k=[]),[2,Promise.resolve(l)]}))}))}),(function(){return Promise.resolve({})}),{getExtraData:function(){return n(a,void 0,void 0,(function(){return o(this,(function(i){return[2,this.getErrorData(t,e,g,f,r)]}))}))}})})).catch((function(t){return Promise.reject(t)})),S=y?Promise.race([I,y]):I;return S.eventually=(L=S,function(t){return b&&m?t(m):k.push(t),L}),S},t.prototype.sendLogBeacon=function(t){var e=this.sdkInternal.getOptions();if(e.getLocalModeEnabled())return!0;var i=new URL(e.getEventLoggingApi()+a.LogEventBeacon);i.searchParams.append("k",this.sdkInternal.getSDKKey()),t.clientTime=Date.now()+"";var n=null;try{n=JSON.stringify(t)}catch(t){return!1}return navigator.sendBeacon(i.toString(),n)},t.prototype.postToEndpoint=function(t,e,i){var r;return n(this,void 0,void 0,(function(){var s,u,c,d,g,p,f,h,v,b,y,m,k,L,I,S,E,w,D,T,M,C,O=this;return o(this,(function(_){if(u=(s=null!=i?i:{}).useKeepalive,c=void 0!==u&&u,d=s.diagnostics,g=void 0===d?null:d,p=null!==(r=null==i?void 0:i.retryOptions)&&void 0!==r?r:{},f=p.retryLimit,h=void 0===f?0:f,v=p.attempt,b=void 0===v?1:v,y=p.backoff,m=void 0===y?1e3:y,(k=this.sdkInternal.getOptions()).getLocalModeEnabled())return[2,Promise.reject("no network requests in localMode")];if("function"!=typeof fetch)return[2,Promise.reject("fetch is not defined")];if("undefined"==typeof window&&!k.getIgnoreWindowUndefined())return[2,Promise.reject("window is not defined")];if(L=[a.Initialize].includes(t)?k.getApi():k.getEventLoggingApi(),I=L+t,null!=(S=this.leakyBucket[I])&&S>=30)return[2,Promise.reject(new Error("Request failed because you are making the same request too frequently."))];if(this.leakyBucket[I]=null==S?1:S+1,E=t===a.Initialize&&l.default.encodeInitializeCall&&"undefined"!=typeof window&&"function"==typeof(null===window||void 0===window?void 0:window.btoa),w=JSON.stringify(e),E)try{D=window.btoa(w).split("").reverse().join(""),w=D}catch(t){E=!1}return T={method:"POST",body:w,headers:{"Content-type":"application/json; charset=UTF-8","STATSIG-API-KEY":this.sdkInternal.getSDKKey(),"STATSIG-CLIENT-TIME":Date.now()+"","STATSIG-SDK-TYPE":this.sdkInternal.getSDKType(),"STATSIG-SDK-VERSION":this.sdkInternal.getSDKVersion(),"STATSIG-ENCODED":E?"1":"0"}},this.canUseKeepalive&&c&&(T.keepalive=!0),null==g||g.start({attempt:b}),C=!0,[2,fetch(I,T).then((function(t){return n(O,void 0,void 0,(function(){var e,i,n;return o(this,(function(o){switch(o.label){case 0:return(M=t).ok?(e=M,204!==M.status?[3,1]:(e.data={has_updates:!1,is_no_content:!0},[3,3])):[3,4];case 1:return[4,M.text()];case 2:i=o.sent(),e.data=JSON.parse(i),o.label=3;case 3:return null==g||g.end(this.getDiagnosticsData(M,b)),[2,Promise.resolve(e)];case 4:return this.retryCodes[M.status]||(C=!1),[4,M.text()];case 5:return n=o.sent(),[2,Promise.reject(new Error(M.status+": "+n))]}}))}))})).catch((function(i){return null==g||g.end(O.getDiagnosticsData(M,b,i)),b<h&&C?new Promise((function(i,n){setTimeout((function(){O.leakyBucket[I]=Math.max(O.leakyBucket[I]-1,0),O.postToEndpoint(t,e,{retryOptions:{retryLimit:h,attempt:b+1,backoff:2*m},useKeepalive:c,diagnostics:g}).then(i).catch(n)}),m)})):Promise.reject(i)})).finally((function(){O.leakyBucket[I]=Math.max(O.leakyBucket[I]-1,0)}))]}))}))},t.prototype.supportsKeepalive=function(){return this.canUseKeepalive},t.prototype.getDiagnosticsData=function(t,e,i){var n,o;return{success:!0===(null==t?void 0:t.ok),statusCode:null==t?void 0:t.status,sdkRegion:null===(n=null==t?void 0:t.headers)||void 0===n?void 0:n.get("x-statsig-region"),isDelta:!0===(null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.is_delta),attempt:e,error:u.default.formatError(i)}},t.prototype.getErrorData=function(t,e,i,r,a){var s;return n(this,void 0,void 0,(function(){var n;return o(this,(function(o){try{return n={},(null!==(s=a.headers)&&void 0!==s?s:[]).forEach((function(t,e){n[e]=t})),[2,{responseInfo:{headers:n,status:a.status,statusText:a.statusText,type:a.type,url:a.url,redirected:a.redirected,bodySnippet:a.data?JSON.stringify(a.data).slice(0,500):null},requestInfo:{endpointName:t,bodySnippet:JSON.stringify(e).slice(0,500),retries:i,backoff:r}}]}catch(t){return[2,{statusText:"statsig::failed to extract extra data"}]}return[2]}))}))},t}();e.default=c},32863:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.encodeInitializeCall=!0,t}();e.default=i},11329:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=e.INIT_TIMEOUT_DEFAULT_MS=void 0;var i;e.INIT_TIMEOUT_DEFAULT_MS=3e3,function(t){t[t.NONE=0]="NONE",t[t.INFO=1]="INFO",t[t.DEBUG=2]="DEBUG"}(i=e.LogLevel||(e.LogLevel={}));var n=function(){function t(t){var n,o,r,a,s,l,u,c,d,g,p,f,h,v,b,y,m,k,L,I,S,E,w;null==t&&(t={});var D=null!==(n=t.api)&&void 0!==n?n:"https://featuregates.org/v1/";this.api=D.endsWith("/")?D:D+"/",this.disableCurrentPageLogging=null!==(o=t.disableCurrentPageLogging)&&void 0!==o&&o,this.environment=null!==(r=t.environment)&&void 0!==r?r:null,this.loggingIntervalMillis=this.normalizeNumberInput(t.loggingIntervalMillis,{default:1e4,min:1e3,max:6e4}),this.loggingBufferMaxSize=this.normalizeNumberInput(t.loggingBufferMaxSize,{default:100,min:2,max:500}),this.disableNetworkKeepalive=null!==(a=t.disableNetworkKeepalive)&&void 0!==a&&a,this.overrideStableID=null!==(s=t.overrideStableID)&&void 0!==s?s:null,this.localMode=null!==(l=t.localMode)&&void 0!==l&&l,this.initTimeoutMs=t.initTimeoutMs&&t.initTimeoutMs>=0?t.initTimeoutMs:e.INIT_TIMEOUT_DEFAULT_MS,this.disableErrorLogging=null!==(u=t.disableErrorLogging)&&void 0!==u&&u,this.disableAutoMetricsLogging=null!==(c=t.disableAutoMetricsLogging)&&void 0!==c&&c,this.initializeValues=null!==(d=t.initializeValues)&&void 0!==d?d:null;var T=null!==(p=null!==(g=t.eventLoggingApi)&&void 0!==g?g:t.api)&&void 0!==p?p:"https://events.statsigapi.net/v1/";this.eventLoggingApi=T.endsWith("/")?T:T+"/",this.prefetchUsers=null!==(f=t.prefetchUsers)&&void 0!==f?f:[],this.disableLocalStorage=null!==(h=t.disableLocalStorage)&&void 0!==h&&h,this.initCompletionCallback=null!==(v=t.initCompletionCallback)&&void 0!==v?v:null,this.updateCompletionCallback=null!==(b=t.updateUserCompletionCallback)&&void 0!==b?b:null,this.disableDiagnosticsLogging=null!==(y=t.disableDiagnosticsLogging)&&void 0!==y&&y,this.logLevel=null!==(m=null==t?void 0:t.logLevel)&&void 0!==m?m:i.NONE,this.ignoreWindowUndefined=null!==(k=null==t?void 0:t.ignoreWindowUndefined)&&void 0!==k&&k,this.fetchMode=null!==(L=t.fetchMode)&&void 0!==L?L:"network-only",this.disableLocalOverrides=null!==(I=null==t?void 0:t.disableLocalOverrides)&&void 0!==I&&I,this.gateEvaluationCallback=null!==(S=null==t?void 0:t.gateEvaluationCallback)&&void 0!==S?S:null,this.userPersistentStorage=null!==(E=null==t?void 0:t.userPersistentStorage)&&void 0!==E?E:null,this.disableAllLogging=null!==(w=t.disableAllLogging)&&void 0!==w&&w,this.setLoggingCopy(t)}return t.prototype.setLoggingCopy=function(t){if(null!=t&&null==this.loggingCopy){var e={};Object.entries(t).forEach((function(i){var n,o,r=i[0],a=i[1];switch(typeof a){case"number":case"bigint":case"boolean":e[String(r)]=a;break;case"string":a.length<50?e[String(r)]=a:e[String(r)]="set";break;case"object":"environment"===r?e.environment=a:"prefetchUsers"===r?e.prefetchUsers=(null!==(o=null===(n=t.prefetchUsers)||void 0===n?void 0:n.length)&&void 0!==o?o:0)>0:e[String(r)]=null!=a?"set":"unset";break;case"function":"userPersistentStorage"===r&&(e.userPersistentStorage=null!=a?"set":"unset")}})),this.loggingCopy=e}},t.prototype.getLoggingCopy=function(){return this.loggingCopy},t.prototype.getApi=function(){return this.api},t.prototype.getEnvironment=function(){return this.environment},t.prototype.getDisableCurrentPageLogging=function(){return this.disableCurrentPageLogging},t.prototype.getLoggingIntervalMillis=function(){return this.loggingIntervalMillis},t.prototype.getLoggingBufferMaxSize=function(){return this.loggingBufferMaxSize},t.prototype.getDisableNetworkKeepalive=function(){return this.disableNetworkKeepalive},t.prototype.getOverrideStableID=function(){return this.overrideStableID},t.prototype.getLocalModeEnabled=function(){return this.localMode},t.prototype.getInitTimeoutMs=function(){return this.initTimeoutMs},t.prototype.getDisableErrorLogging=function(){return this.disableErrorLogging},t.prototype.getDisableAutoMetricsLogging=function(){return this.disableAutoMetricsLogging},t.prototype.getInitializeValues=function(){return this.initializeValues},t.prototype.getEventLoggingApi=function(){return this.eventLoggingApi},t.prototype.getPrefetchUsers=function(){return this.prefetchUsers},t.prototype.getDisableLocalStorage=function(){return this.disableLocalStorage},t.prototype.getInitCompletionCallback=function(){return this.initCompletionCallback},t.prototype.getUpdateUserCompletionCallback=function(){return this.updateCompletionCallback},t.prototype.getDisableDiagnosticsLogging=function(){return this.disableDiagnosticsLogging},t.prototype.getLogLevel=function(){return this.logLevel},t.prototype.getIgnoreWindowUndefined=function(){return this.ignoreWindowUndefined},t.prototype.getFetchMode=function(){return this.fetchMode},t.prototype.getDisableLocalOverrides=function(){return this.disableLocalOverrides},t.prototype.getGateEvaluationCallback=function(){return this.gateEvaluationCallback},t.prototype.getUserPersistentStorage=function(){return this.userPersistentStorage},t.prototype.isAllLoggingDisabled=function(){return this.disableAllLogging},t.prototype.reenableAllLogging=function(){this.disableAllLogging=!1},t.prototype.normalizeNumberInput=function(t,e){return null==t?e.default:Math.max(Math.min(t,e.max),e.min)},t}();e.default=n},75452:function(t,e,i){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},o=this&&this.__rest||function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.getUserHashWithoutStableID=void 0;var r=i(43746);e.getUserHashWithoutStableID=function(t){var e=t.customIDs,i=o(t,["customIDs"]),a=n({},e);return delete a.stableID,(0,r.djb2HashForObject)(n(n({},i),{customIDs:a}))}}}]);
//# sourceMappingURL=https://www.scribd.com/webpack/monolith/232.168732a1486fd5a6f118.js.map